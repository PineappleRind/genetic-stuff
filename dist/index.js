var Simulation=function(){var t={},e=[null];function n(n,r,o){t[n]={dependencies:r,factory:o},e[0]=n}n("require",["exports"],function(t){Object.defineProperty(t,"__cjsModule",{value:!0}),Object.defineProperty(t,"default",{value:function(t){return o(t)}})}),n("types",["require","exports"],function(t,e){"use strict";e.__esModule=!0,e.Person=e.Food=void 0;var n=function(){return function(t){var e=t[0],n=t[1];return this.type="food",this.location={x:e,y:n},this}}();e.Food=n;var r=function(){return function(t,e){this.type="person",this.id=t,this.genes=e||[]}}();e.Person=r}),n("helpers/grid",["require","exports","types"],function(t,e,n){"use strict";e.__esModule=!0;var r=function(){return function(t){var e=this;this.set=function(t,n){var r=t[0],o=t[1];return e.grid[r][o].push(n),e},this.remove=function(t,n){var r=t[0],o=t[1];return e.grid[r][o]=e.grid[r][o].filter(function(t){return t!==n}),e},this.get=function(t){var n=t[0],r=t[1];return e.grid[n][r]},this.countFood=function(t){var n=t[0],r=t[1];return e.grid[n][r].filter(function(t){return"food"===t.type}).length},this.countPeople=function(t){var n=t[0],r=t[1];return e.grid[n][r].filter(function(t){return"person"===t.type}).length},this.consumeFood=function(t,n){var r=t[0],o=t[1],i=e.countFood([r,o]);return console.log("There is "+i+" food at "+r+","+o),0===i?0:(e.grid[r][o]=e.grid[r][o].filter(function(t){return t!==i[0]}),i)},this.removeAllPeople=function(){return e.grid.forEach(function(t,r){t.forEach(function(t,o){t.forEach(function(t){t instanceof n.Person&&e.remove([r,o],t)})})}),e},this.size=t,this.grid=Array.from(Array(t),function(){return Array(t).fill([])})}}();e.default=r}),n("helpers/food",["require","exports","types"],function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.prototype.addFood=function(t,e){e=e||1;for(var r=0;r<t.size;r++)for(var o=0;o<t.size;o++){var i=[r,o];t.set(i,new n.Food(i)),t.set(i,new n.Food(i))}return t},t.prototype.clearFood=function(t){return t.grid.forEach(function(e,r){e.forEach(function(e,o){e.forEach(function(e){e instanceof n.Food&&t.remove([r,o],e)})})}),t},t.prototype.removeAllFrom=function(t,e){var n=e[0],r=e[1];return t.grid[n][r].forEach(function(e){"food"===e.type&&(t=t.remove([n,r],e))}),t},t}();e.default=r}),n("managers/simulation",["require","exports","types","helpers/food","helpers/grid"],function(t,e,n,r,o){"use strict";e.__esModule=!0;var i=function(){function t(t){var e=this;return this.population=[],this.genes=[],this.addListener=function(t,n){return e.events[t]=n,e},this.dispatchEvent=function(t,n){return!!e.events[t]&&e.events[t](n)},this.tick=0,this.population=[],this.genes=t.genes||[],this.events={},t.startPopulation&&(this.population=Array.from({length:t.startPopulation},function(t,r){return new n.Person(r,e.genes)})),this.grid=new o.default(t.gridSize||100),this.food=new r.default,this.tickStep=1e3,this}return t.prototype.begin=function(){var t=this;return this.nextGen(),this.genInterval=setInterval(function(){return t.nextGen()},this.tickStep),this},t.prototype.stop=function(){return clearInterval(this.genInterval),this},t.prototype.nextGen=function(){var t=this,e=this.dispatchEvent,r=this.food,o=this.grid,i=this.population;this.tick++,e("tick",this.tick),o=r.addFood(r.clearFood(o),i.length);var u=0,s=0;i.forEach(function(a){var f=[Math.floor(Math.random()*t.grid.size),Math.floor(Math.random()*t.grid.size)];if(!(o.countPeople(f)>0)){o.set(f,a),console.log(o[f[1]]),e("move",{coords:f,person:a});var c=o.consumeFood(f,a);if(e("food",c),o=r.removeAllFrom(o,f),2===c){var d=new n.Person(i.length,a.genes);t.population.push(d),e("population",{population:t.population.length}),e("birth",{births:u++})}else 0===c&&(t.population.splice(t.population.indexOf(a),1),e("population",{population:t.population.length}),e("death",{deaths:s++}))}}),o=o.removeAllPeople()},t}();e.default=i});var r={};function o(e){if(r[e])return r[e];if("exports"===e)return{};var n=function(e){return t[e]?t[e]:t[e+"/index"]?t[e+"/index"]:{dependencies:["exports"],factory:function(t){try{Object.defineProperty(t,"__cjsModule",{value:!0}),Object.defineProperty(t,"default",{value:require(e)})}catch(t){throw Error(['module "',e,'" not found.'].join(""))}}}}(e);r[e]={};var i=n.dependencies.map(function(t){return o(t)});n.factory.apply(n,i);var u=i[n.dependencies.indexOf("exports")];return r[e]=u.__cjsModule?u.default:u,r[e]}if(null!==e[0])return o(e[0])}();